<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Emoji Mirror</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="main-container">
        <h1>AI Emoji Mirror ðŸ“¸</h1>
        <p>Upload a hand gesture, and I'll mimic it!</p>

        <div class="result-box">
            <div class="emoji-display" id="emojiOutput">ðŸ¤”</div>
            <h2 id="textOutput">Waiting for image...</h2>
        </div>

        <div class="upload-section">
            <div class="preview-frame">
                <img id="userImage" src="https://via.placeholder.com/150?text=Your+Photo" alt="Uploaded Image">
            </div>

            <input type="file" id="fileInput" accept="image/*" hidden>
            <label for="fileInput" class="upload-btn">
                ðŸ“¤ Upload Hand Photo
            </label>
        </div>

    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const userImage = document.getElementById('userImage');
        const emojiOutput = document.getElementById('emojiOutput');
        const textOutput = document.getElementById('textOutput');

        fileInput.addEventListener('change', function() {
            const formData = new FormData();
            formData.append('file', this.files[0]);

            // Show loading state
            emojiOutput.innerText = "â³";
            textOutput.innerText = "Analyzing...";

            // Show local preview immediately
            userImage.src = URL.createObjectURL(this.files[0]);

            fetch('/predict_emoji', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Update the big Emoji
                emojiOutput.innerText = data.emoji;
                textOutput.innerText = data.name;
                
                // Add a cool pop animation
                emojiOutput.style.transform = "scale(0.5)";
                setTimeout(() => {
                    emojiOutput.style.transform = "scale(1.2)";
                    setTimeout(() => emojiOutput.style.transform = "scale(1)", 200);
                }, 100);
            });
        });
    </script>
</body>
</html>